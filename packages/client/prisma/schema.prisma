generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Airplane {
  id           String   @id
  create_at    DateTime @default(now())
  waypointName String
  Country      String
  valid        Boolean  @default(true)
  Waypoint     Waypoint @relation(fields: [Country, waypointName], references: [Country, name])

  @@unique([Country, waypointName], name: "Airplane.Country_waypointName_unique")
}

model ILS {
  AirportCountry String
  AirportName    String
  Airport        Airport    @relation(fields: [AirportCountry, AirportName], references: [country, name])
  Waypoint       Waypoint[]

  @@id([AirportCountry, AirportName])
}

model SID {
  AirportCountry String
  AirportName    String
  Airport        Airport    @relation(fields: [AirportCountry, AirportName], references: [country, name])
  Waypoint       Waypoint[]

  @@id([AirportCountry, AirportName])
}

model Waypoint {
  name                     String      @unique
  sIDId                    String?
  AirportName              String?
  ControllerName           String?
  Country                  String
  controllerAirportCountry String?
  controllerAirportName    String?
  controllerName           String?
  groundAirportName        String?
  groundCountry            String?
  iLSAirportCountry        String?
  iLSAirportName           String?
  sIDAirportCountry        String?
  sIDAirportName           String?
  Controller               Controller? @relation(fields: [controllerAirportCountry, controllerAirportName, controllerName], references: [AirportCountry, AirportName, Name])
  Ground                   Ground?     @relation(fields: [groundCountry, groundAirportName], references: [Country, AirportName])
  ILS                      ILS?        @relation(fields: [iLSAirportCountry, iLSAirportName], references: [AirportCountry, AirportName])
  SID                      SID?        @relation(fields: [sIDAirportCountry, sIDAirportName], references: [AirportCountry, AirportName])
  Airplane                 Airplane?

  @@id([Country, name])
}

model Airport {
  country    String
  name       String
  Controller Controller[]
  Ground     Ground?
  ILS        ILS?
  SID        SID?

  @@id([country, name])
}

model Controller {
  RF             RF
  Name           String
  AirportCountry String
  AirportName    String
  Airport        Airport    @relation(fields: [AirportCountry, AirportName], references: [country, name])
  Waypoint       Waypoint[]

  @@id([AirportCountry, AirportName, Name])
}

model Ground {
  AirportName String
  Country     String
  Airport     Airport    @relation(fields: [Country, AirportName], references: [country, name])
  Waypoint    Waypoint[]

  @@id([Country, AirportName])
}

model Message {
  id      String   @id
  from    String
  to      String?
  content String
  sent_at DateTime @default(now())
  rf      RF
}

enum RF {
  F120D5
  F121D4
  F134D6
}
